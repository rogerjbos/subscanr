<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Roger J. Bos" />

<meta name="date" content="2022-07-26" />

<title>Substrate blockchain analysis in R</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Substrate blockchain analysis in R</h1>
<h4 class="author">Roger J. Bos</h4>
<h4 class="date">2022-07-26</h4>



<p>This vignettes demonstrates the functionality of the <em>subscanr</em> package that facilitates substrate blockchain analysis in R. By substrate we are referring to the Polkadot / Kusama (DotSama) ecosystem, which could include up to 200 different parachains.</p>
<p>The package provides an interface into three different indexing services in the DotSama ecosystem, along with a bonus section showing how to access on-chain data using Python code in R:</p>
<ul>
<li><a href="https://www.subscan.io/">Subscan</a></li>
<li><a href="https://subquery.network/">Sub Query</a></li>
<li><a href="https://polkaholic.io/#chains">Polkaholic</a></li>
<li><a href="https://github.com/polkascan/py-substrate-interface">Python Substrate Interface</a></li>
</ul>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>You can install the <code>subscanr</code> package using devtools (or remotes) as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install_github</span>(<span class="st">&quot;rogerjbos/subscanr&quot;</span>)</span></code></pre></div>
<p>Once installed, you can load the package. The package comes with a number of functions which are detailed below, and it also comes with a few objects and helper functions. I won’t cover all of them, but the <code>tokens</code> object is useful because it shows the number of decimal places used for each token. This object is update manually so it may be always be as up-to-date as it should be!</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(subscanr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Loading required package: httr</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;subscanr&#39;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following object is masked _by_ &#39;.GlobalEnv&#39;:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     %+%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>tokens</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Token                                     Name decimals</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1:          3USD                               Taiga 3USD       12</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2:           ACA                                aca-token       12</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3:           AIR                                   altair       18</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4:          ARIS                              polaris-dao        8</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5:          AUSD                             acala-dollar       12</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6:           BNC                      bifrost-native-coin       12</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7:           BSX                                 basilisk       12</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8:          CASH                            compound-cash        8</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9:          CRAB                    darwinia-crab-network       18</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10:           CSM                     crust-storage-market       12</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11:           DOT                                 polkadot       10</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12: DOT (on Homa)                          staked polkadot       10</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13:           EQD                          equilibrium-usd        9</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14:          GENS                                 genshiro        9</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15:           HKO                                    heiko       12</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16:           KAR                                   karura       12</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17:          KBTC                             kintsugi-btc        8</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18:          KICO                                     kico       14</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19:          KINT                                 kintsugi       12</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20:           KMA                                  calamri       12</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 21:           KSM                                   kusama       12</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 22: KSM (on Homa)                            staked-kusama       12</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23:          KUSD                            karura-dollar       12</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 24:         LCDOT                     liquid-crowdloan-dot       10</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 25:          LDOT                               liquid-dot       10</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 26:          LKSM                               liquid-ksm       12</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 27:          MOVR                                moonriver       18</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 28:          NEER                metaverse-network-pioneer       18</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 29:           PHA                                      pha       12</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 30:           QTZ                                   quartz       18</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 31:          RMRK                                     rmrk       10</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32:        RENBTC                                   renbtc        8</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 33:           TAI                                      tai       12</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 34:        taiKSM                                  tai-ksm       12</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35:          TEER integritee-trusted-execution-environment       12</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 36:          USDC                                 usd-coin        6</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 37:          USDT                                   tether        6</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 38:         VSKSM                 bifrost-voucher-slot-ksm       12</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             Token                                     Name decimals</span></span></code></pre></div>
</div>
<div id="subscan" class="section level2">
<h2>Subscan</h2>
<p>Subscan extracts blockchain data from all the available parachains and stores the data in its own database that users can access via their (free) <a href="https://support.subscan.io/#introduction">API</a>. You have to request a key <a href="https://pro.subscan.io/login">here</a>. I will show some examples of pulling data from the Subscan API below, but if you have any questions, the best place to ask them is in their <a href="https://app.element.io/#/room/#subscan:matrix.org">maxtrix site</a>.</p>
<p>Subscan currently covers 59 different chains, which are stored in the <code>endpoints</code> variable. You can use the get_endpoint() function to get the host address:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(subscanr<span class="sc">::</span>endpoints)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     network_name                     api_host</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:      Polkadot      polkadot.api.subscan.io</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:        Kusama        kusama.api.subscan.io</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:      Darwinia      darwinia.api.subscan.io</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:         Crust         crust.api.subscan.io</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: Acala Mandala acala-testnet.api.subscan.io</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:         Acala         acala.api.subscan.io</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">get_endpoint</span>(<span class="st">&quot;Acala&quot;</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;acala.api.subscan.io&quot;</span></span></code></pre></div>
<p>The primary function is <code>get_subscan_events</code>, which we will call using the <code>extract = FALSE</code> parameter. The functions returns two objects. The <code>core_data</code> object lists the general details of each requested event, such as the block number, extrinsic_hash, and timestamp. The <code>params</code> object contains the actual details on the event, but it is in JSON format so it is more difficult to read.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_subscan_events</span>(<span class="at">nobs =</span> <span class="dv">10</span>, <span class="at">network =</span> <span class="st">&#39;Karura&#39;</span>, <span class="at">module =</span> <span class="st">&#39;dex&#39;</span>, <span class="at">call =</span> <span class="st">&#39;Swap&#39;</span>, <span class="at">extract =</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;10 rows for page 1/1 Success at 2022-07-26 14:01:03&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># First few lines of the core_data</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp<span class="sc">$</span>core_data)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    event_index block_num extrinsic_idx module_id event_id phase event_idx</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   2342532-2   2342532             2       dex     Swap     0        12</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   2342529-2   2342529             2       dex     Swap     0        11</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   2342529-2   2342529             2       dex     Swap     0        17</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   2342528-2   2342528             2       dex     Swap     0        20</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:   2342527-2   2342527             2       dex     Swap     0        11</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:   2342526-2   2342526             2       dex     Swap     0        20</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                        extrinsic_hash finalized</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x05e13493363d51f16cd9243ec5b8f756f21199e2220ec6128fda3e9383f02d2a      TRUE</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0xc11bc93e6ea5b6fbcd828fc037d2efc61247f9f4235dacf99570d08e0a662d04      TRUE</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0xc11bc93e6ea5b6fbcd828fc037d2efc61247f9f4235dacf99570d08e0a662d04      TRUE</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0x10b79e7b22d32c3788968e8aa0661e9db68568391b14a1a7537cfcddcd19c9fa      TRUE</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 0x3397d23921775e9635ad1415b7f15a2dbd67c383af94676302a2a4bdcb052369      TRUE</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 0x39a7eba0796e3a852c4097fa9996f6832300a555a120f697e2a9cebf661ff8f6      TRUE</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    block_timestamp</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:      1658856186</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:      1658856126</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:      1658856126</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:      1658856114</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:      1658856102</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:      1658856090</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters for the first event</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>tmp<span class="sc">$</span>params[<span class="dv">1</span>]</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;[{\&quot;type\&quot;:\&quot;[U8; 32]\&quot;,\&quot;type_name\&quot;:\&quot;AccountId\&quot;,\&quot;value\&quot;:\&quot;0x48d6b26dccfa8a3870c5c31377c0995347447d66626ab004b0459366e4fd8642\&quot;},{\&quot;type\&quot;:\&quot;Vec\\u003cacala_primitives:currency:CurrencyId\\u003e\&quot;,\&quot;type_name\&quot;:\&quot;Vec\\u003cCurrencyId\\u003e\&quot;,\&quot;value\&quot;:[{\&quot;Token\&quot;:\&quot;KUSD\&quot;},{\&quot;Token\&quot;:\&quot;LKSM\&quot;}]},{\&quot;type\&quot;:\&quot;Vec\\u003cU128\\u003e\&quot;,\&quot;type_name\&quot;:\&quot;Vec\\u003cBalance\\u003e\&quot;,\&quot;value\&quot;:[\&quot;1000000000000000\&quot;,\&quot;151761495505065\&quot;]}]&quot;</span></span></code></pre></div>
<p>The <code>get_subscan_events</code> function can be called for any endpoint, but the format of the <code>params</code> object will be different for every module and chain. My works involves the <code>Acala</code> and <code>Karura</code> chains, so I have coded an <code>extract</code> function to re-format the JSON output and add it to the <code>core_data</code> object, but this has only been implemented for <code>Acala</code> and <code>Karura</code>. If you view the source code you can see how I extract the data and modify that for the chain you are interested.</p>
<p>The default value of the <code>extract</code> parameter is TRUE, so if you call the function again without that parameter, you will see the new <code>core_data</code> object, which has been augmented with the JSON data extracted from the <code>params</code> column.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_subscan_events</span>(<span class="at">nobs =</span> <span class="dv">10</span>, <span class="at">network =</span> <span class="st">&#39;Karura&#39;</span>, <span class="at">module =</span> <span class="st">&#39;dex&#39;</span>, <span class="at">call =</span> <span class="st">&#39;Swap&#39;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;10 rows for page 1/1 Success at 2022-07-26 14:01:03&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># First few lines of the core_data</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp<span class="sc">$</span>core_data)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>The Subscan API limits each call to 100 rows of data, so if you set <code>nobs</code> to greater than 100 the function will use pagination to make multiple calls and aggregate the data, waiting a few seconds every few calls so as to not exceed the API limit for free data. If you leave the <code>module</code> and / or <code>call</code> parameters empty the function will return all blockchain events. That will give you an idea of what options are available for a specific chain so you can specify them and narrow your search.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_subscan_events</span>(<span class="at">nobs =</span> <span class="dv">300</span>, <span class="at">network =</span> <span class="st">&#39;Karura&#39;</span>, <span class="at">module =</span> <span class="st">&#39;&#39;</span>, <span class="at">call =</span> <span class="st">&#39;&#39;</span>, <span class="at">extract =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100 rows for page 1/3 Success at 2022-07-26 14:01:03&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100 rows for page 2/3 Success at 2022-07-26 14:01:06&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100 rows for page 3/3 Success at 2022-07-26 14:01:06&quot;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Module and event types returned for the specified chain</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(tmp<span class="sc">$</span>core_data<span class="sc">$</span>module_id)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;balances&quot;           &quot;currencies&quot;         &quot;tokens&quot;            </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;system&quot;             &quot;transactionpayment&quot; &quot;acalaoracle&quot;       </span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;xcmpqueue&quot;          &quot;treasury&quot;           &quot;utility&quot;           </span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;homa&quot;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(tmp<span class="sc">$</span>core_data<span class="sc">$</span>event_id)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Transfer&quot;           &quot;Transferred&quot;        &quot;Deposited&quot;         </span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;Endowed&quot;            &quot;Withdrawn&quot;          &quot;ExtrinsicSuccess&quot;  </span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;TransactionFeePaid&quot; &quot;Deposit&quot;            &quot;NewFeedData&quot;       </span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;Withdraw&quot;           &quot;Success&quot;            &quot;BatchCompleted&quot;    </span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;ItemCompleted&quot;      &quot;ExtrinsicFailed&quot;    &quot;Minted&quot;</span></span></code></pre></div>
<p>There are many other functions you can run. To save space I won’t list the output of all of them, but I will list them below so you can try them out on your own.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_token</span>()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_token</span>(<span class="at">network =</span> <span class="st">&#39;Acala&#39;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_accounts</span>(<span class="at">network =</span> <span class="st">&#39;Acala&#39;</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_account_tokens</span>(<span class="at">network =</span> <span class="st">&#39;Acala&#39;</span>, <span class="at">addr =</span> <span class="st">&#39;23M5ttkmR6Kco5p3LFGKMpMv4zvLkKdUQWW1wGGoV8zDX3am&#39;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_metadata</span>(<span class="at">network =</span> <span class="st">&#39;Acala&#39;</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_extrinsic</span>(<span class="at">extrinsic =</span> <span class="st">&#39;398539-2&#39;</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_price</span>()</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_price_history</span>(<span class="at">network =</span> <span class="st">&#39;Darwinia&#39;</span>, <span class="at">start =</span> <span class="st">&#39;2021-11-01&#39;</span>, <span class="at">end =</span> <span class="st">&#39;2021-11-02&#39;</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_currencies</span>(<span class="st">&#39;Polkadot&#39;</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">get_subscan_price_converter</span>(<span class="at">network =</span> <span class="st">&#39;Polkadot&#39;</span>, <span class="at">time =</span> <span class="dv">957105</span>, <span class="at">value =</span> <span class="dv">1000</span>, <span class="at">from =</span> <span class="st">&#39;USD&#39;</span>, <span class="at">quote =</span> <span class="st">&#39;DOT&#39;</span>)</span></code></pre></div>
</div>
<div id="sub-query" class="section level2">
<h2>Sub Query</h2>
<p>Sub Query takes a different approach. They provide a framework where someone can create a TypeScript project that collects and indexes blockchain data and Sub Query will host that project. Then users can use <code>GraphQL</code> to query the indexed data from that project.</p>
<p>Sub Query has a search feature to find projects for a specific chain you are interested. <code>Acala</code> and <code>Karura</code> has many different projects, a short list of which can be found <a href="https://acala.rogerjbos.com/about/">here</a>. For example Karura has a project called <code>karura-tokens</code>. In the example below we use the <code>get_query</code> function to pass a <code>url</code> and a <code>query</code> to a Sub Query project and view the returned data.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ghql)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> GraphqlClient<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&#39;https://api.subquery.network/sq/AcalaNetwork/karura-tokens&#39;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="st">&#39;query { accountBalances (first: 6) { nodes { id accountId tokenId total } } }&#39;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_query</span>(url, query)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $data</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $data$accountBalances</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $data$accountBalances$nodes</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                    id</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 oa1uNP9CYn32Hc9vCfvDsKym7nzCSmDKrrc8hbRuKj8Tw9s-KAR</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 oa24dgeTofWmzyf6PY9wsswXnEmdj7SJzdRt241tRCyvNNg-KAR</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 oa24dgeTofWmzyf6PY9wsswXnEmdj7SJzdRt241tRCyvNNg-KSM</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 oa297c6JipW7kW5JZucvi36itjpZ7SWZ6HM5mCcsA5Sv2sB-KAR</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 oa2bytbqvHxGvwPgs8SGYud9g2uqbNj35Biff8qQaVTpXS6-KAR</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 oa2i8PT2uBzudpwYkUYVCDneFF3SzDBL1p174Vq47rE2apP-KAR</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                         accountId tokenId        total</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 oa1uNP9CYn32Hc9vCfvDsKym7nzCSmDKrrc8hbRuKj8Tw9s     KAR 200000000000</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 oa24dgeTofWmzyf6PY9wsswXnEmdj7SJzdRt241tRCyvNNg     KAR 100000000000</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 oa24dgeTofWmzyf6PY9wsswXnEmdj7SJzdRt241tRCyvNNg     KSM   7989754078</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 oa297c6JipW7kW5JZucvi36itjpZ7SWZ6HM5mCcsA5Sv2sB     KAR 100016581863</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 oa2bytbqvHxGvwPgs8SGYud9g2uqbNj35Biff8qQaVTpXS6     KAR 200000000000</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 oa2i8PT2uBzudpwYkUYVCDneFF3SzDBL1p174Vq47rE2apP     KAR 288449968684</span></span></code></pre></div>
<p>The function <code>get_query</code> is just an example of how to use <code>GraphQL</code> to execute a simple query. A better example is the <code>get_graph</code> function which takes an endpoint, method, edges, and window as parameters. The <code>endpoint</code> is the url of the Sub Query project’s GraphQL server and the <code>window</code> is the number of days of history to query.</p>
<p>The <code>method</code> and <code>edges</code> can be found from the <code>schema.graphql</code> file within the associated project. <a href="https://github.com/AcalaNetwork/acala-dex-subql/blob/master/schema.graphql">Here</a> of a <code>schema.graphql</code> file. In the example <code>Swap</code> is automatically converted to <code>swaps</code>, so that is what you put in for <code>method</code> and the <code>edges</code> are the fields you would like to query, where the <code>schema.graphql</code> lists all the possible fields for each type.</p>
<p>Sub Query also only returns 100 rows per call, so the <code>get_graph</code> function automatically uses pagination to collect and aggregate the output into one return object.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>endpoint <span class="ot">&lt;-</span> <span class="st">&quot;https://api.subquery.network/sq/AcalaNetwork/acala-dex&quot;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>method <span class="ot">&lt;-</span> <span class="st">&quot;swaps&quot;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> <span class="st">&quot;id address {id} pool {id}  token0 {id} token1 {id} token0InAmount token1OutAmount tradePath price0 price1 block {id} extrinsic {id} timestamp&quot;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">get_graph</span>(endpoint, method, edges, <span class="at">window =</span> <span class="dv">1</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1 100&quot;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2 100&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;3 100&quot;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4 100&quot;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5 100&quot;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;6 100&quot;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;7 100&quot;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;8 100&quot;</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;9 100&quot;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;10 79&quot;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(res)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 979</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(res)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            id    token0InAmount  token1OutAmount        tradePath</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 1500788-12    40000000000000     144556447335    ACA,AUSD,LDOT</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 1500789-12    63000000000000     227657814560    ACA,AUSD,LDOT</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 1500809-12   200000004499156    2478290066426        AUSD,LDOT</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 1500812-20     9290523713466  744602249598885        LDOT,AUSD</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 1500819-11 10000000000000000 2905826538626498         ACA,AUSD</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 1500870-21     1000000000000  744320321532328 DOT,lc://13,AUSD</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 price0              price1               timestamp</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:  296367912360000000  805328864654000000 2022-07-25T00:04:42.527</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:  296355938955000000  805376803881000000 2022-07-25T00:05:00.462</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 1000000000000000000  805898948653000000 2022-07-25T00:09:00.442</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:  803950013464000000 1000000000000000000 2022-07-25T00:09:36.283</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:  294464577707000000 1000000000000000000 2022-07-25T00:11:00.392</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 7381933755069035436 1000000000000000000  2022-07-25T00:21:42.44</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                          address.id        pool.id token0.id</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 219sUVF5ZjudGZ2f5W9kunkr6yzSFWm5e7w6o3UCnjFbQ7Rr  lp://ACA/LDOT       ACA</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 2442gg48H18WhicdGm7kwHRPJrZsFXdApVtQFafKNUrp6dqr  lp://ACA/LDOT       ACA</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 25rmSsaxkJhPrtqqDkFMmACX5pTMBjBLPVCDjpxJ9LPHZ79S lp://AUSD/LDOT      AUSD</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 25iKjHR2nwrn8dUavmFCqAcxrja1YasLQhckWCygb9CC1UuW lp://AUSD/LDOT      LDOT</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 2476EhPjUhqZoRmUdeHdVMTWi3Mf5fprBA56R7HdScmtHRSR  lp://ACA/AUSD       ACA</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 25iKjHR2nwrn8dUavmFCqAcxrja1YasLQhckWCygb9CC1UuW  lp://AUSD/DOT       DOT</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    token1.id block.id</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:      LDOT  1500788</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:      LDOT  1500789</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:      LDOT  1500809</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:      AUSD  1500812</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:      AUSD  1500819</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:      AUSD  1500870</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                          extrinsic.id</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x431711cab6fadb09ba897819fbf59b0d2f8bf8005900a4573398e1d709af625b</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x79e90f1de99bb9781ab2f8edc75568d7ce47581d5c98a4abf700dfdcc05dc0c3</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0xf4c6d26c16b16faddfbb65c4c3779133b9b7bab012752f9790b78210e0bb609b</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0x78243ccfcbaf594d48a65d67000906bbc75ba0f96a7c756dbc25479fb39c6334</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 0x2be1b76d6f0dc87ad15b01cbf5d30afaf34e637637e381e3eb3a88930e92019f</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 0xbe7c7a88fed5e77290c0e1d1b3c35bfdd45a62954c8556854345feaa63636376</span></span></code></pre></div>
<p>Now for the real functions! The first part of the function name describes the data that the function returns and the last part indicates which Sub Query project it comes from, so this function get the <code>Swaps</code> data from <code>acala-dex</code>. For network you can use <code>Acala</code> or <code>Karura</code>. Those are the only two implemented so far. To include other parachains, someone would first have to create the TypeScript project to index the data. Since each parachains stores their data in a different way, you would realy need to write a custom function for each parachain, which can make cross-chain analysis difficult in the DotSama ecosystem.</p>
<p>The <code>window</code> parameters indicates how many days history you would like and the <code>endpage</code> parameters specifies the max number of observations, where each page returns 100 observations. The default is 20,000, which should be enough for most calls. I set a lower number in these examples so it runs faster since they are just examples.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">getSwaps_acala_dex</span>(<span class="at">network =</span> <span class="st">&quot;Acala&quot;</span>, <span class="at">window =</span> <span class="dv">1</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1 100&quot;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2 100&quot;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;3 100&quot;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4 100&quot;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5 100&quot;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;6 100&quot;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;7 100&quot;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;8 100&quot;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;9 100&quot;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;10 79&quot;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            id    token0InAmount  token1OutAmount        tradePath</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 1500788-12    40000000000000     144556447335    ACA,AUSD,LDOT</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 1500789-12    63000000000000     227657814560    ACA,AUSD,LDOT</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 1500809-12   200000004499156    2478290066426        AUSD,LDOT</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 1500812-20     9290523713466  744602249598885        LDOT,AUSD</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 1500819-11 10000000000000000 2905826538626498         ACA,AUSD</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 1500870-21     1000000000000  744320321532328 DOT,lc://13,AUSD</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 price0              price1               timestamp</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:  296367912360000000  805328864654000000 2022-07-25T00:04:42.527</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:  296355938955000000  805376803881000000 2022-07-25T00:05:00.462</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 1000000000000000000  805898948653000000 2022-07-25T00:09:00.442</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:  803950013464000000 1000000000000000000 2022-07-25T00:09:36.283</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:  294464577707000000 1000000000000000000 2022-07-25T00:11:00.392</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 7381933755069035436 1000000000000000000  2022-07-25T00:21:42.44</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                             address           pool token0</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 219sUVF5ZjudGZ2f5W9kunkr6yzSFWm5e7w6o3UCnjFbQ7Rr  lp://ACA/LDOT    ACA</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 2442gg48H18WhicdGm7kwHRPJrZsFXdApVtQFafKNUrp6dqr  lp://ACA/LDOT    ACA</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 25rmSsaxkJhPrtqqDkFMmACX5pTMBjBLPVCDjpxJ9LPHZ79S lp://AUSD/LDOT   AUSD</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 25iKjHR2nwrn8dUavmFCqAcxrja1YasLQhckWCygb9CC1UuW lp://AUSD/LDOT   LDOT</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 2476EhPjUhqZoRmUdeHdVMTWi3Mf5fprBA56R7HdScmtHRSR  lp://ACA/AUSD    ACA</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 25iKjHR2nwrn8dUavmFCqAcxrja1YasLQhckWCygb9CC1UuW  lp://AUSD/DOT    DOT</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    token1   block</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   LDOT 1500788</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   LDOT 1500789</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   LDOT 1500809</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   AUSD 1500812</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:   AUSD 1500819</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:   AUSD 1500870</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                             extrinsic</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x431711cab6fadb09ba897819fbf59b0d2f8bf8005900a4573398e1d709af625b</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x79e90f1de99bb9781ab2f8edc75568d7ce47581d5c98a4abf700dfdcc05dc0c3</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0xf4c6d26c16b16faddfbb65c4c3779133b9b7bab012752f9790b78210e0bb609b</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0x78243ccfcbaf594d48a65d67000906bbc75ba0f96a7c756dbc25479fb39c6334</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 0x2be1b76d6f0dc87ad15b01cbf5d30afaf34e637637e381e3eb3a88930e92019f</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 0xbe7c7a88fed5e77290c0e1d1b3c35bfdd45a62954c8556854345feaa63636376</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          date block_num      pair     path0      path1 path2 exclude</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 2022-07-25   1500788  ACA:LDOT  ACA:AUSD  AUSD:LDOT    NA   FALSE</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 2022-07-25   1500789  ACA:LDOT  ACA:AUSD  AUSD:LDOT    NA   FALSE</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 2022-07-25   1500809 AUSD:LDOT AUSD:LDOT         NA    NA   FALSE</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 2022-07-25   1500812 AUSD:LDOT AUSD:LDOT         NA    NA   FALSE</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 2022-07-25   1500819  ACA:AUSD  ACA:AUSD         NA    NA   FALSE</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 2022-07-25   1500870  AUSD:DOT DOT:LCDOT AUSD:LCDOT    NA   FALSE</span></span></code></pre></div>
<p>Here is a function that pulls the <code>daily account balance</code> data from the <code>acala-token</code> project.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">getDailyAccountBalance_acala_token</span>(<span class="at">network =</span> <span class="st">&quot;Acala&quot;</span>, <span class="at">window =</span> <span class="dv">1</span>, <span class="at">endpage =</span> <span class="dv">1</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1 100&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    tokenId                                        accountId           timestamp</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:     ACA 2111Juuo2t8iHay2sDbibeecX8jQgxoFeocSyDvERT1kCtVx 2022-06-10T00:00:00</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:     ACA 211212DGrYZGRSAYatkvWwV4c2kBEC6mFcdxxDot3ymh9dQx 2022-06-10T00:00:00</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:     ACA 21146iN6RRhLBSTPxtv7J2si4YaSh8zxmPGRvhSMNZAuwmNv 2022-06-10T00:00:00</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:     ACA 2115TK1S7F7jyRtk3uVDZgmaas15tuwRVoV8SzLnoV9NUHgr 2022-06-10T00:00:00</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:     ACA 2116f9oVcz1eS84gDk1TmUM9tCJtASzLcLER9SBhddwCtvLM 2022-06-10T00:00:00</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:     ACA 2116XdefX6BfBKFHRQhB3cN4AWc3iLyuGEGo4nmSoRbSntd6 2022-06-10T00:00:00</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          total        free reserved frozen updateAtBlock decimals           adj</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 477.0000000 477.0000000        0      0       1197130       12 1000000000000</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   0.1973238   0.1973238        0      0       1197068       12 1000000000000</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   0.1975181   0.1975181        0      0       1197155       12 1000000000000</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   0.1475191   0.1475191        0      0       1197144       12 1000000000000</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:   0.1474788   0.1474788        0      0       1197078       12 1000000000000</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:   0.1973235   0.1973235        0      0       1197043       12 1000000000000</span></span></code></pre></div>
<p>The next example shows the daily aggregated loan data from the <code>acala-loans</code> project. This is known as the Honzon protocol. The <code>depositAmount</code> is the amount of <code>collaeral</code> that was deposited, and <code>depositVolumeUSD</code> shows the value in USD. The depositors are allowed to mint a certain amount of stablecoin backed by that collateral and the amount minted is shown in the <code>debitAmount</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">getLoansDailyCollateral_acala_loan</span>(<span class="at">network =</span> <span class="st">&quot;Acala&quot;</span>, <span class="at">window =</span> <span class="dv">1</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1 10&quot;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    collateral.id depositAmount debitAmount depositVolumeUSD debitVolumeUSD</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:           ACA 76835084.3265    23162686       20408166.7      2339983.1</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:           ACA 76724031.7980    23123654       18680000.0      2336172.4</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:           DOT      994.8128     2461308         688271.2       249458.1</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:           DOT     1006.1747     2617063         660302.1       265258.1</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:         LCDOT    24187.4952    13477817       14219807.2      1366011.4</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:         LCDOT    24142.7496    13301237       13566565.5      1348198.3</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    depositChangedUSD debitChangedUSD debitExchangeRate           timestamp</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:        -20616.847       -9165.531         0.1010238 2022-07-25T00:00:00</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:        -28770.387       -3943.196         0.1010296 2022-07-26T00:00:00</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:         -5676.745      -16317.096         0.1013518 2022-07-25T00:00:00</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:          7627.988       15786.721         0.1013572 2022-07-26T00:00:00</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:        -31735.830       -6019.658         0.1013526 2022-07-25T00:00:00</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:        -27961.618      -17896.453         0.1013589 2022-07-26T00:00:00</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    txCount       Date                 Name decimals           adj</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:     178 2022-07-25            aca-token       12 1000000000000</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:     157 2022-07-26            aca-token       12 1000000000000</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:      19 2022-07-25             polkadot       10 1000000000000</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:      25 2022-07-26             polkadot       10 1000000000000</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:      41 2022-07-25 liquid-crowdloan-dot       10 1000000000000</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:      36 2022-07-26 liquid-crowdloan-dot       10 1000000000000</span></span></code></pre></div>
<pre><code>Here are some other examples you can try on your own.


```r
tmp &lt;- getDailyPools_acala_dex(network = &quot;Acala&quot;, window = 1)
tmp &lt;- getLoansCollateralParams_acala_loan(network = &quot;Acala&quot;)
tmp &lt;- getLoansDailyPositions_acala_loan(network = &quot;Acala&quot;, window = 1)
tmp &lt;- getLiquidateUnsafeCDP_acala_loan(network = &quot;Acala&quot;, window = 30)
tmp &lt;- getDailyAccountBalance_acala_token(network = &quot;Acala&quot;, window = 1, endpage = 1)
tmp &lt;- getMint_acala_homa(network = &quot;Acala&quot;, window = 1, endpage = 1)
tmp &lt;- getRequestedRedeem_acala_homa(network = &quot;Acala&quot;, window = 1, endpage = 1)
tmp &lt;- getRedeemRequestCancelled_acala_homa(network = &quot;Acala&quot;, window = 1, endpage = 1)
tmp &lt;- getRedeemByUnbond_acala_homa(network = &quot;Acala&quot;, window = 1, endpage = 1)
tmp &lt;- getRedeemByFastMatch_acala_homa(network = &quot;Acala&quot;, window = 1, endpage = 1)
tmp &lt;- getPoolStats_acala_dex(network = &quot;Acala&quot;, window = 1)
tmp &lt;- getTokenDailyData_acala_dex(network = &quot;Acala&quot;, window = 1)
tmp &lt;- getDailyPool_acala_dex(network = &quot;Acala&quot;, window = 1)</code></pre>
</div>
<div id="polkaholic" class="section level2">
<h2>Polkaholic</h2>
<p>Polkaholic provides an <a href="https://docs.polkaholic.io/#introduction">API</a> for accessing their data. You have to request a key <a href="https://polkaholic.io/login">here</a>. I will show some examples of pulling data from the Polkaholic API below, but if you have any questions, the best place to ask them is in their <a href="https://app.element.io/#/room/#subscan:matrix.org">maxtrix site</a>.</p>
<p>Polkaholic currently covers 60 different chains, which you can view using the <code>get_polkaholic_chains</code> function. When interacting with their API, you can use either the <code>id</code> or the <code>chainID</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_polkaholic_chains</span>()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   id prefix chainID           chainName symbol lastFinalizedTS</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:            altair    136   22088              Altair    AIR      1658858480</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:             bajun     42   22119       Bajun network             1658858480</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:          basilisk  10041   22090            Basilisk    BSX      1658858472</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:       bifrost-ksm      6   22001      Bifrost-kusama    BNC      1658858472</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: bitcountrypioneer    268   22096 Bit.country pioneer   NEER      1658858480</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:          calamari     78   22084            Calamari    KMA      1658857383</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                            iconUrl numExtrinsics7d</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:            https://cdn.polkaholic.io/altair.svg           70692</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:             https://cdn.polkaholic.io/bajun.png           79360</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:          https://cdn.polkaholic.io/basilisk.png           66789</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:           https://cdn.polkaholic.io/bifrost.png           84684</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: https://cdn.polkaholic.io/bitcountryPioneer.png           77379</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:          https://cdn.polkaholic.io/calamari.png           73937</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    numExtrinsics30d numExtrinsics numSignedExtrinsics7d numSignedExtrinsics30d</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:           293176       2599956                   490                   1732</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:           104842        104842                     0                      0</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:           285065       3021444                   221                   1175</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:           375493       4712556                  4598                  21394</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:           307048       2395746                    63                    436</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:           335809       3679950                   455                   1843</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    numSignedExtrinsics numTransfers7d numTransfers30d numTransfers numEvents7d</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:               20996            336             988        19422       73038</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:                   0              0               0            0       79382</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:                2008             50             292         4627      101456</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:              423108          66384          271506      1493880      244537</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:                2898           2630           13365       105175       82565</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:              126558            297            1189        76920       76454</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    numEvents30d numEvents valueTransfersUSD7d valueTransfersUSD30d</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:       300477   2778162         26662.35237         126307.91153</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:       104874    104874             0.00000              0.00000</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:       434175   4184312            27.91346             27.91346</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:      1055032   9557498        769917.54509        2020421.73465</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:       328231   2617303             0.00000              0.00000</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:       345819   4139605        198412.35663         775773.06141</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    valueTransfersUSD numHolders relayChain   totalIssuance isEVM blocksCovered</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:    16911635.43467      22343     kusama       472866080     0       1284632</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:           0.00000          4     kusama               0     0        150840</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:          27.91346      16147     kusama               0     0       1535672</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   218050764.46564      99566     kusama        80000000     0       2174334</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:           0.00000      16801     kusama 100000000376832     0       1196658</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:   146800122.76591      23596     kusama     10000000000     0       1776880</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    blocksFinalized                crawlingStatus</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:         1284630                              </span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:          150838 Only partial index available.</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:         1535670                              </span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:         2174334                              </span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:         1196656                              </span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:         1776874                              </span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                           githubURL</span></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   https://github.com/centrifuge/centrifuge-chain</span></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:                https://github.com/ajuna-network/</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: https://github.com/galacticcouncil/Basilisk-node</span></span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:       https://github.com/bifrost-finance/bifrost</span></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: https://github.com/bit-country/Metaverse-Network</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:           https://github.com/Manta-Network/Manta</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                substrateURL</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:    https://marketplace.substrate.io/projects/centrifuge/</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: https://marketplace.substrate.io/projects/ajuna-network/</span></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:                                                     &lt;NA&gt;</span></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:       https://marketplace.substrate.io/projects/bifrost/</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:    https://marketplace.substrate.io/projects/bitcountry/</span></span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: https://marketplace.substrate.io/projects/manta-network/</span></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                          parachainsURL</span></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:              https://parachains.info/details/altair</span></span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:       https://parachains.info/details/bajun_network</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:            https://parachains.info/details/basilisk</span></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:     https://parachains.info/details/bifrost_finance</span></span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: https://parachains.info/details/bit_country_pioneer</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6:    https://parachains.info/details/calamari_network</span></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                               dappURL</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:                               &lt;NA&gt;</span></span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:                               &lt;NA&gt;</span></span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:                               &lt;NA&gt;</span></span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:               https://bifrost.app/</span></span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:                               &lt;NA&gt;</span></span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: https://app.dolphin.manta.network/</span></span></code></pre></div>
<p>As an example, we will pull up the first five dex Swap transaction for the Karura parachain between July 1st and July 2nd.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_polkaholic_events</span>(<span class="at">chain =</span> <span class="st">&quot;karura&quot;</span>, <span class="at">module =</span> <span class="st">&quot;dex&quot;</span>, <span class="at">call =</span> <span class="st">&#39;Swap&#39;</span>, <span class="at">startDate=</span><span class="st">&#39;2022-07-01&#39;</span>, <span class="at">endDate=</span><span class="st">&#39;2022-07-02&#39;</span>, <span class="at">nobs =</span> <span class="dv">5</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    chainID blockNumber            eventID</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   22000     2202851 22000-2202851-2-12</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   22000     2202830 22000-2202830-2-35</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   22000     2202805 22000-2202805-2-35</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   22000     2202657 22000-2202657-2-11</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:   22000     2202654 22000-2202654-3-25</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                         extrinsicHash section</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x1d6ef28701799a5a59ff4b4ff14cfe85e58140208af1c69f7c46bdf3830d081f     dex</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x991722c2aae8eef7e166115cc8a51df8a30ee1369eb6fff309995e3d54464222     dex</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0xecb4654b895adc013af55673034061ee0549c991687ec07273a87198ad3c1bb5     dex</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0x305c6048f2ea3099be8660d41c2782bf848dea506edfd995120f7c060184fc35     dex</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 0xaf424fc4ddb8013470c8ff2f66c5ae98aab98e36cf8ec52aeeb9a6a21f6c85b3     dex</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    method    blockTS chainName                time</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   Swap 1656806340    Karura 2022-07-02 23:59:00</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   Swap 1656806028    Karura 2022-07-02 23:53:48</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   Swap 1656805632    Karura 2022-07-02 23:47:12</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   Swap 1656803418    Karura 2022-07-02 23:10:18</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:   Swap 1656803377    Karura 2022-07-02 23:09:37</span></span></code></pre></div>
<p>In addition to specifying the <code>startDate</code> and <code>endDate</code>, you can also specify the <code>startBlock</code> and <code>endBlock</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_polkaholic_events</span>(<span class="at">chain =</span> <span class="st">&quot;karura&quot;</span>, <span class="at">module =</span> <span class="st">&quot;dex&quot;</span>, <span class="at">call =</span> <span class="st">&#39;Swap&#39;</span>, <span class="at">startBlock=</span><span class="dv">1000000</span>, <span class="at">endBlock=</span><span class="dv">1000015</span>, <span class="at">nobs =</span> <span class="dv">5</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    chainID blockNumber            eventID</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   22000     1000014  22000-1000014-2-8</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   22000     1000013 22000-1000013-4-13</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   22000     1000012  22000-1000012-2-8</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   22000     1000011 22000-1000011-4-18</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:   22000     1000011 22000-1000011-5-23</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                         extrinsicHash section</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4     dex</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x0170cd01ef4dc07eabcfbfbeb052cf2b28dc49928338d1c4a992dc99abb5974b     dex</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0x32ebd150679b15f13682b7fc1896098dc89a34b999d925b89dabdc30b8174ce5     dex</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0x5fbcf9c368549ca375d4f4966fe6b886b2f7f6acc8184e24a4e9e77b285034de     dex</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 0x3f415a3d613af05eda18e953272ab10042171478d8236077b8a9cf1d42b45825     dex</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    method    blockTS chainName                time</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   Swap 1637847342    Karura 2021-11-25 13:35:42</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   Swap 1637847333    Karura 2021-11-25 13:35:33</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   Swap 1637847307    Karura 2021-11-25 13:35:07</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   Swap 1637847295    Karura 2021-11-25 13:34:55</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5:   Swap 1637847295    Karura 2021-11-25 13:34:55</span></span></code></pre></div>
<p>Polkaholic does not use pagination, but you can request up to 100,000 rows at a time using the <code>nobs</code> parameter. If you need more than that, you will have to use <code>startDate</code> and <code>endDate</code> (or <code>startblock</code> and <code>endBlock</code>) to make multiple calls and piece the data together yourself.</p>
<p>Notice that Polkaholic does not return the transaction details (the <code>params</code> object from Subscan), instead, you have to use the <code>extrinsic_hash</code> and manually retrieve the details using the <code>get_polkaholic_transaction</code> function.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">get_polkaholic_transaction</span>(<span class="at">TxHash =</span> <span class="st">&#39;0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4&#39;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    chainID     id chainName</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   22000 karura    Karura</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   22000 karura    Karura</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                         extrinsicHash</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    extrinsicID blockNumber         ts</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   1000014-2     1000014 1637847342</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   1000014-2     1000014 1637847342</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                             blockHash</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x58a7cd4211e09e8c0130ea307dfe5cf5dee05b6612af0dd00278690b6837834d</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x58a7cd4211e09e8c0130ea307dfe5cf5dee05b6612af0dd00278690b6837834d</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                             signer</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: sNLXuhfbpq6aVojSY2mRrRYtrUExMhcqgkC523rsj738cR1</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: sNLXuhfbpq6aVojSY2mRrRYtrUExMhcqgkC523rsj738cR1</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                           fromAddress</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0xb409946bbb59780d2775932e91b73555c482889615b69050a256541367032e1f</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0xb409946bbb59780d2775932e91b73555c482889615b69050a256541367032e1f</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                                                             signature</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0xb8ded7167bf30331d1b532fa78131e11ae99b18228d6921942bfdba099d26a29c1f077014931913bf54c557abe22786d438a9c10963ce7d5285af31072fe9487</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0xb8ded7167bf30331d1b532fa78131e11ae99b18228d6921942bfdba099d26a29c1f077014931913bf54c557abe22786d438a9c10963ce7d5285af31072fe9487</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    lifetime nonce        tip        fee chainSymbol    feeUSD     tipUSD</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:        0 27856 0.01420536 0.01655075         KAR 0.1040049 0.08926651</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:        0 27856 0.01420536 0.01655075         KAR 0.1040049 0.08926651</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    priceUSD priceUSDCurrent result    status section              method</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:    6.284         0.56734      1 finalized     dex swapWithExactTarget</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:    6.284         0.56734      1 finalized     dex swapWithExactTarget</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        params    events.eventID</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: KAR -&gt; KSM 22000-1000014-2-8</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   1140.719 22000-1000014-2-8</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                          events.docs</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: [Use supply currency to swap target currency. \\[trader, trading_path,, liquidity_change_list\\]]</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: [Use supply currency to swap target currency. \\[trader, trading_path,, liquidity_change_list\\]]</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    events.section events.method events.data   events.dataType</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:            dex          Swap   &lt;list[3]&gt; &lt;data.frame[3x2]&gt;</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:            dex          Swap   &lt;list[3]&gt; &lt;data.frame[3x2]&gt;</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    events.decodedData specVersion                time token0 token1 token2</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:  &lt;data.frame[3x4]&gt;        1019 2021-11-25 13:35:42    KAR    KSM   &lt;NA&gt;</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:  &lt;data.frame[3x4]&gt;        1019 2021-11-25 13:35:42    KAR    KSM   &lt;NA&gt;</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    token3         amount0       amount1 amount2 amount3</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   &lt;NA&gt; 180847852165451 3300000000000    &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   &lt;NA&gt; 180847852165451 3300000000000    &lt;NA&gt;    &lt;NA&gt;</span></span></code></pre></div>
<p>If you have a transaction hash and all you need to know if the associated block number, you can use the <code>get_polkaholic_hash</code> function for that.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_polkaholic_hash</span>(<span class="at">TxHash =</span> <span class="st">&#39;0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4&#39;</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                  hash</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         hashType    status chainID blockNumber</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: extrinsicHash finalized   22000     1000014</span></span></code></pre></div>
<p>To make this easier, I implemented the <code>extract_polkaholic_events</code> function to query, extract, and aggregate the data, but so far this has only been implemented for dex Swaps, so it is pretty limited. Again, looking at the code it should be easy to see how to extend it for more modules.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tmp1 <span class="ot">&lt;-</span> <span class="fu">get_polkaholic_events</span>(<span class="at">chain =</span> <span class="st">&quot;karura&quot;</span>, <span class="at">module =</span> <span class="st">&quot;dex&quot;</span>, <span class="at">call =</span> <span class="st">&#39;Swap&#39;</span>, <span class="at">startBlock=</span><span class="dv">1</span>, <span class="at">endBlock=</span><span class="dv">2208550</span>, <span class="at">nobs =</span> <span class="dv">10</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>tmp2 <span class="ot">&lt;-</span> <span class="fu">extract_polkaholic_events</span>(tmp1)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in if (dat$section == &quot;dex&quot; &amp; dat$method == &quot;Swap&quot;) {: the condition has</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; length &gt; 1 and only the first element will be used</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tmp2)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    chainID     id chainName</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   22000 karura    Karura</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   22000 karura    Karura</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   22000 karura    Karura</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   22000 karura    Karura</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                         extrinsicHash</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    extrinsicID blockNumber         ts</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   1000014-2     1000014 1637847342</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   1000014-2     1000014 1637847342</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   1000014-2     1000014 1637847342</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   1000014-2     1000014 1637847342</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                             blockHash</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x58a7cd4211e09e8c0130ea307dfe5cf5dee05b6612af0dd00278690b6837834d</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0x58a7cd4211e09e8c0130ea307dfe5cf5dee05b6612af0dd00278690b6837834d</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0x58a7cd4211e09e8c0130ea307dfe5cf5dee05b6612af0dd00278690b6837834d</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0x58a7cd4211e09e8c0130ea307dfe5cf5dee05b6612af0dd00278690b6837834d</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                             signer</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: sNLXuhfbpq6aVojSY2mRrRYtrUExMhcqgkC523rsj738cR1</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: sNLXuhfbpq6aVojSY2mRrRYtrUExMhcqgkC523rsj738cR1</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: sNLXuhfbpq6aVojSY2mRrRYtrUExMhcqgkC523rsj738cR1</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: sNLXuhfbpq6aVojSY2mRrRYtrUExMhcqgkC523rsj738cR1</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                           fromAddress</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0xb409946bbb59780d2775932e91b73555c482889615b69050a256541367032e1f</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0xb409946bbb59780d2775932e91b73555c482889615b69050a256541367032e1f</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0xb409946bbb59780d2775932e91b73555c482889615b69050a256541367032e1f</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0xb409946bbb59780d2775932e91b73555c482889615b69050a256541367032e1f</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                                                             signature</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0xb8ded7167bf30331d1b532fa78131e11ae99b18228d6921942bfdba099d26a29c1f077014931913bf54c557abe22786d438a9c10963ce7d5285af31072fe9487</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 0xb8ded7167bf30331d1b532fa78131e11ae99b18228d6921942bfdba099d26a29c1f077014931913bf54c557abe22786d438a9c10963ce7d5285af31072fe9487</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 0xb8ded7167bf30331d1b532fa78131e11ae99b18228d6921942bfdba099d26a29c1f077014931913bf54c557abe22786d438a9c10963ce7d5285af31072fe9487</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 0xb8ded7167bf30331d1b532fa78131e11ae99b18228d6921942bfdba099d26a29c1f077014931913bf54c557abe22786d438a9c10963ce7d5285af31072fe9487</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    lifetime nonce        tip        fee chainSymbol    feeUSD     tipUSD</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:        0 27856 0.01420536 0.01655075         KAR 0.1040049 0.08926651</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:        0 27856 0.01420536 0.01655075         KAR 0.1040049 0.08926651</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:        0 27856 0.01420536 0.01655075         KAR 0.1040049 0.08926651</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:        0 27856 0.01420536 0.01655075         KAR 0.1040049 0.08926651</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    priceUSD priceUSDCurrent result    status section              method</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:    6.284         0.56734      1 finalized     dex swapWithExactTarget</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:    6.284         0.56734      1 finalized     dex swapWithExactTarget</span></span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:    6.284         0.56734      1 finalized     dex swapWithExactTarget</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:    6.284         0.56734      1 finalized     dex swapWithExactTarget</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        params    events.eventID</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: KAR -&gt; KSM 22000-1000014-2-8</span></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   1140.719 22000-1000014-2-8</span></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: KAR -&gt; KSM 22000-1000014-2-8</span></span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   1140.719 22000-1000014-2-8</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                          events.docs</span></span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: [Use supply currency to swap target currency. \\[trader, trading_path,, liquidity_change_list\\]]</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: [Use supply currency to swap target currency. \\[trader, trading_path,, liquidity_change_list\\]]</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: [Use supply currency to swap target currency. \\[trader, trading_path,, liquidity_change_list\\]]</span></span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: [Use supply currency to swap target currency. \\[trader, trading_path,, liquidity_change_list\\]]</span></span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    events.section events.method events.data   events.dataType</span></span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:            dex          Swap   &lt;list[3]&gt; &lt;data.frame[3x2]&gt;</span></span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:            dex          Swap   &lt;list[3]&gt; &lt;data.frame[3x2]&gt;</span></span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:            dex          Swap   &lt;list[3]&gt; &lt;data.frame[3x2]&gt;</span></span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:            dex          Swap   &lt;list[3]&gt; &lt;data.frame[3x2]&gt;</span></span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    events.decodedData specVersion                time token0 token1 token2</span></span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:  &lt;data.frame[3x4]&gt;        1019 2021-11-25 13:35:42    KAR    KSM   &lt;NA&gt;</span></span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:  &lt;data.frame[3x4]&gt;        1019 2021-11-25 13:35:42    KAR    KSM   &lt;NA&gt;</span></span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:  &lt;data.frame[3x4]&gt;        1019 2021-11-25 13:35:42    KAR    KSM   &lt;NA&gt;</span></span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:  &lt;data.frame[3x4]&gt;        1019 2021-11-25 13:35:42    KAR    KSM   &lt;NA&gt;</span></span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    token3         amount0       amount1 amount2 amount3</span></span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:   &lt;NA&gt; 180847852165451 3300000000000    &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2:   &lt;NA&gt; 180847852165451 3300000000000    &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:   &lt;NA&gt; 180847852165451 3300000000000    &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:   &lt;NA&gt; 180847852165451 3300000000000    &lt;NA&gt;    &lt;NA&gt;</span></span></code></pre></div>
<p>Finally, if you have a transaction hash and all you need to know if the associated block number, you can use the <code>get_polkaholic_hash</code> function for that.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_polkaholic_hash</span>(<span class="at">TxHash =</span> <span class="st">&#39;0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4&#39;</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                  hash</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 0x079192270cfd80cebf03c54eb59dd48528b6e1506a697ed6c11a832deb193bd4</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         hashType    status chainID blockNumber</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: extrinsicHash finalized   22000     1000014</span></span></code></pre></div>
</div>
<div id="python-substrate-interface" class="section level2">
<h2>Python Substrate Interface</h2>
<p>Subscan, Sub Query, and Polkaholic are all good for collecting data that has already been indexed, but if you data directly from the substrate blockchain, most people use the polkadot{js} API, which is written in Javascript. While there are no tools like that written in R, the <a href="https://explorer.polkascan.io/">Polkascan</a> team created a python library to interact with substrate and it works really well. Thanks to the <a href="https://rstudio.github.io/reticulate/">reticulate</a> package we can run python code within R. I will show some examples below, but more documentation on it can be found <a href="https://polkascan.github.io/py-substrate-interface/">here</a>. If you have any questions on using it, the best place to ask is in the the <a href="https://substrate.stackexchange.com/">Substrate Stack Exchange</a>. After installing <code>reticulate</code> in R and <code>py-substrate-interface</code> in python, you need to load the package into R:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span></code></pre></div>
<p>Then define your python function. In this example we will use the <code>system.Account</code> module to get the number of tokens held by an account. In this example we are not specify a block number, so it gives us the tip by default (the latest block).</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> substrateinterface <span class="im">import</span> SubstrateInterface</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_Balance(chain, addr):</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> chain<span class="op">==</span><span class="st">&quot;Polkadot&quot;</span>:</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://polkadot.api.onfinality.io/public-ws&#39;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        decimals <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> chain<span class="op">==</span><span class="st">&quot;Kusama&quot;</span>:</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://kusama.api.onfinality.io/public-ws&#39;</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        decimals <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> chain<span class="op">==</span><span class="st">&quot;Karura&quot;</span>:</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://karura.polkawallet.io&#39;</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        decimals <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://acala-rpc-0.aca-api.network&#39;</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>        decimals <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    substrate <span class="op">=</span> SubstrateInterface(url)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    balance_info <span class="op">=</span> substrate.get_runtime_state(</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>        module<span class="op">=</span><span class="st">&#39;System&#39;</span>,</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        storage_function<span class="op">=</span><span class="st">&#39;Account&#39;</span>,</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>        params<span class="op">=</span>[addr]).get(<span class="st">&#39;result&#39;</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    balance <span class="op">=</span> balance_info.get(<span class="st">&#39;data&#39;</span>).get(<span class="st">&#39;free&#39;</span>, <span class="dv">0</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Address </span><span class="sc">{</span>addr<span class="sc">}</span><span class="ss"> had </span><span class="sc">{</span>balance <span class="op">/</span> <span class="dv">10</span><span class="op">**</span>decimals<span class="sc">}</span><span class="ss"> DOT.&quot;</span>)</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>get_Balance(chain <span class="op">=</span> <span class="st">&quot;Polkadot&quot;</span>, addr <span class="op">=</span> <span class="st">&#39;14QV6hfAiXyb5LBajUqWR9CrQKxfQZMkBiERpQFuoj7YBqis&#39;</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Address 14QV6hfAiXyb5LBajUqWR9CrQKxfQZMkBiERpQFuoj7YBqis had 6.8480215514 DOT.</span></span></code></pre></div>
<p>In this example we are querying the Acala oracle to get the token prices as of a certain block number. In order to query data as of a certain block number, we need to know the block hash, which we can get from the <code>get_block_hash</code> function. In substrate, pricing data always has 18 decimal places, so we adjust the price for that.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> substrateinterface <span class="im">import</span> SubstrateInterface</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> getOraclePrices(chain, block_id):</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> chain<span class="op">==</span><span class="st">&quot;Karura&quot;</span>:</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://karura.polkawallet.io&#39;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://acala-rpc-0.aca-api.network&#39;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    substrate <span class="op">=</span> SubstrateInterface(url)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">hash</span> <span class="op">=</span> substrate.get_block_hash(block_id)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    timestamp <span class="op">=</span> substrate.query(module<span class="op">=</span><span class="st">&#39;Timestamp&#39;</span>,storage_function<span class="op">=</span><span class="st">&#39;Now&#39;</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>      block_hash<span class="op">=</span><span class="bu">hash</span>).value</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> substrate.query_map(<span class="st">&#39;AcalaOracle&#39;</span>, <span class="st">&#39;Values&#39;</span>, block_hash <span class="op">=</span> <span class="bu">hash</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> []</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> res <span class="kw">in</span> p:</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>        outi <span class="op">=</span> {<span class="st">&quot;chain&quot;</span>: chain, <span class="st">&quot;token&quot;</span>: <span class="bu">str</span>(res[<span class="dv">0</span>].value), <span class="st">&quot;price&quot;</span>: </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>          res[<span class="dv">1</span>].value[<span class="st">&#39;value&#39;</span>] <span class="op">/</span> <span class="dv">10</span><span class="op">**</span><span class="dv">18</span>}</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>        data.append(outi)</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>tmp <span class="op">=</span> getOraclePrices(chain<span class="op">=</span><span class="st">&#39;Karura&#39;</span>, block_id<span class="op">=</span><span class="dv">2000000</span>)</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tmp)</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     chain             token     price</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0  Karura  {&#39;Token&#39;: &#39;KSM&#39;}  78.82000</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  Karura  {&#39;Token&#39;: &#39;KAR&#39;}   0.58805</span></span></code></pre></div>
<p>Substrate is somewhat unique in that each network has a different address format, but it is easy to convert an address format from one parachain to another by way of the public key. The polkadot{js} API has an <code>encodeAddress</code> function that does the conversion in one call, but using <code>py-substrate-interface</code> we will use the <code>ss58_decode</code> function to convert the origin address to its public key and then use the <code>ss58_encode</code> function to convert that public key into the destination address. Each network has a <code>ss58_format</code>. In this example we are converting from Substrate, which is ss58_format 42, to Acala Network, which is ss58_format 10.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> substrateinterface <span class="im">import</span> SubstrateInterface</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> substrateinterface.utils.ss58 <span class="im">import</span> ss58_decode, ss58_encode</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert ss58 address from one chain to another </span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># (i.e. Substrate=42, Polkadot=0, Kusama=2, Acala=10, Karura=8)</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ss58_convert(addr, fromChain, toChain):</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  pk <span class="op">=</span> ss58_decode(addr, valid_ss58_format <span class="op">=</span> <span class="bu">int</span>(fromChain))</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  output <span class="op">=</span> ss58_encode(pk, ss58_format <span class="op">=</span> <span class="bu">int</span>(toChain))</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> output</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>addr <span class="op">=</span> <span class="st">&quot;5EChUec3ZQhUvY1g52ZbfBVkqjUY9Kcr6mcEvQMbmd38shQL&quot;</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>newAddress <span class="op">=</span> ss58_convert(addr, fromChain<span class="op">=</span><span class="dv">42</span>, toChain<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Substrate address </span><span class="sc">{</span>addr<span class="sc">}</span><span class="ss"> </span><span class="ch">\n</span><span class="ss"> translates to Acala address </span><span class="sc">{</span>newAddress<span class="sc">}</span><span class="ss">.&quot;</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Substrate address 5EChUec3ZQhUvY1g52ZbfBVkqjUY9Kcr6mcEvQMbmd38shQL </span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  translates to Acala address 231bCuH9G6iDvf4q5zQqaLzAACu8PTUC4ft3EXmxxG1Xs6HW.</span></span></code></pre></div>
<p>In this example we are getting the account balance as of a specific block number. We also use the <code>pandas.to_datetime</code> function to convert the block timestamp into a human readable format.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> substrateinterface <span class="im">import</span> SubstrateInterface</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># import numpy as np</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_fees(url, acct, block_id):</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    substrate <span class="op">=</span> SubstrateInterface(url)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">hash</span> <span class="op">=</span> substrate.get_block_hash(<span class="bu">int</span>(block_id))        </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    timestamp <span class="op">=</span> substrate.query(module<span class="op">=</span><span class="st">&#39;Timestamp&#39;</span>,storage_function<span class="op">=</span><span class="st">&#39;Now&#39;</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>      block_hash<span class="op">=</span><span class="bu">hash</span>).value</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    block <span class="op">=</span> substrate.get_block_number(<span class="bu">hash</span>)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    balance_info <span class="op">=</span> substrate.get_runtime_state(</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>        module<span class="op">=</span><span class="st">&#39;System&#39;</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>        storage_function<span class="op">=</span><span class="st">&#39;Account&#39;</span>,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>        params<span class="op">=</span>[acct],</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>        block_hash<span class="op">=</span><span class="bu">hash</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    ).get(<span class="st">&#39;result&#39;</span>)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    balance <span class="op">=</span> balance_info.get(<span class="st">&#39;data&#39;</span>).get(<span class="st">&#39;free&#39;</span>, <span class="dv">0</span>) <span class="op">/</span> <span class="dv">10</span><span class="op">**</span><span class="dv">12</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> {<span class="st">&quot;Block&quot;</span>: block, <span class="st">&quot;Time&quot;</span>: timestamp, <span class="st">&#39;Balance&#39;</span>: balance}</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;wss://acala-rpc-0.aca-api.network&#39;</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>acct <span class="op">=</span> <span class="st">&#39;23M5ttkmR6KcoTAAE6gcmibnKFtVaTP5yxnY8HF1BmrJ2A1i&#39;</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>block_id <span class="op">=</span> <span class="st">&#39;2100000&#39;</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>fees <span class="op">=</span> get_fees(url<span class="op">=</span>url, acct<span class="op">=</span>acct, block_id<span class="op">=</span>block_id)</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>fees[<span class="st">&#39;Time&#39;</span>] <span class="op">=</span> pd.to_datetime(fees[<span class="st">&#39;Time&#39;</span>],unit<span class="op">=</span><span class="st">&#39;ms&#39;</span>)</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fees)</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; {&#39;Block&#39;: 1512838, &#39;Time&#39;: Timestamp(&#39;2022-07-26 18:01:36.301000&#39;), &#39;Balance&#39;: 51785.84858995333}</span></span></code></pre></div>
<p>In the final example we define a function that makes two calls, one to <code>tokens.TotalIssuance</code> and a second one to <code>homa.StakingLedgers</code>. The latter refers to Acala Network’s Homa liquid staking protocol, which converts a staked token to a liquid derivative to allow the token to be used in DeFi while it is being staked. This function also takes an array of block history, so it shows the values as of multiple block numbers.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> substrateinterface <span class="im">import</span> SubstrateInterface</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> getTotalIssuance(network, block_history):</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> network.lower() <span class="op">==</span> <span class="st">&#39;acala&#39;</span>:</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://acala-rpc-0.aca-api.network&#39;</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        token <span class="op">=</span> <span class="st">&#39;LDOT&#39;</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>        decimals <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>: </span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        url <span class="op">=</span> <span class="st">&#39;wss://karura.polkawallet.io&#39;</span>      </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        token <span class="op">=</span> <span class="st">&#39;LKSM&#39;</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        decimals <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> []</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    substrate <span class="op">=</span> SubstrateInterface(url)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> block_history:</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>        <span class="bu">hash</span> <span class="op">=</span> substrate.get_block_hash(block_id <span class="op">=</span> <span class="bu">int</span>(j))</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>        liquid <span class="op">=</span> substrate.query(module<span class="op">=</span><span class="st">&#39;Tokens&#39;</span>,storage_function<span class="op">=</span><span class="st">&#39;TotalIssuance&#39;</span>, </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>          params <span class="op">=</span> [{<span class="st">&#39;Token&#39;</span>: token}], block_hash <span class="op">=</span> <span class="bu">hash</span>).value <span class="op">/</span> <span class="dv">10</span><span class="op">**</span>decimals</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>            homa <span class="op">=</span> substrate.query_map(module<span class="op">=</span><span class="st">&#39;Homa&#39;</span>,storage_function<span class="op">=</span><span class="st">&#39;StakingLedgers&#39;</span>, </span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>              block_hash <span class="op">=</span> <span class="bu">hash</span>)</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>            amount <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> res <span class="kw">in</span> homa:</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>                amount <span class="op">+=</span> res[<span class="dv">1</span>].value[<span class="st">&#39;bonded&#39;</span>]</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>            amount <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>        outi <span class="op">=</span> {<span class="st">&quot;network&quot;</span>: network, <span class="st">&quot;Block&quot;</span>: j, <span class="st">&#39;liquid_amount&#39;</span>: liquid, </span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;staking_amount&#39;</span>: amount <span class="op">/</span> <span class="dv">10</span><span class="op">**</span>decimals}</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>        data.append(outi)</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>tmp <span class="op">=</span> getTotalIssuance(network<span class="op">=</span><span class="st">&quot;Acala&quot;</span>, block_history<span class="op">=</span>[<span class="dv">2000000</span>,<span class="dv">2100000</span>,<span class="dv">2200000</span>])</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tmp)</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   network    Block  liquid_amount  staking_amount</span></span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0   Acala  2000000   6.577701e+07    7.150764e+06</span></span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   Acala  2100000   6.577701e+07    7.150764e+06</span></span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   Acala  2200000   6.580027e+07    7.150764e+06</span></span></code></pre></div>
<p>I hope this vignette has demonstrate the wide variety of blockchain data you can pull into R. Once you have the data in R there are endless statistical and graphing routines which are available to analyze the data and gleam insights based on the on-chain data.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
